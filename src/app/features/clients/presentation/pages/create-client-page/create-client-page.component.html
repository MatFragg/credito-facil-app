<div class="create-client-page">
    <!-- Page Header -->
    <div class="page-header">
        <div class="breadcrumb">
            <span class="breadcrumb-link" (click)="cancel()">Clientes</span>
            <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
            <span class="breadcrumb-current">Agregar Cliente</span>
        </div>
        <h1 class="page-title">Agregar Cliente</h1>
        <p class="page-subtitle">Registra un nuevo cliente en el sistema</p>
    </div>

    <!-- Form Card -->
    <mat-card class="form-card">
        <mat-card-content>
            <form [formGroup]="form" class="client-form">
                <!-- Section Header -->
                <div class="form-section-header">
                    <h3>Información del Cliente</h3>
                    <p class="required-note">Complete todos los campos obligatorios marcados con *</p>
                </div>

                <!-- Form Fields Grid -->
                <div class="form-grid">
                    <!-- First Name -->
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Nombre *</mat-label>
                        <input matInput formControlName="firstName" placeholder="Ej. Juan" autocomplete="given-name" />
                        <mat-error *ngIf="hasError('firstName')">
                            {{ getErrorMessage('firstName') }}
                        </mat-error>
                    </mat-form-field>

                    <!-- Last Name -->
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Apellidos *</mat-label>
                        <input matInput formControlName="lastName" placeholder="Ej. Pérez García"
                            autocomplete="family-name" />
                        <mat-error *ngIf="hasError('lastName')">
                            {{ getErrorMessage('lastName') }}
                        </mat-error>
                    </mat-form-field>

                    <!-- Email -->
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Email *</mat-label>
                        <input matInput type="email" formControlName="email" placeholder="cliente@ejemplo.com"
                            autocomplete="email" />
                        <mat-error *ngIf="hasError('email')">
                            {{ getErrorMessage('email') }}
                        </mat-error>
                    </mat-form-field>

                    <!-- DNI -->
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>DNI *</mat-label>
                        <input matInput formControlName="dni" placeholder="12345678" (input)="formatDni($event)"
                            maxlength="8" />
                        <mat-hint>Debe contener exactamente 8 dígitos</mat-hint>
                        <mat-error *ngIf="hasError('dni')">
                            {{ getErrorMessage('dni') }}
                        </mat-error>
                    </mat-form-field>

                    <!-- Phone -->
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Teléfono *</mat-label>
                        <input matInput formControlName="phone" placeholder="+51 987 654 321"
                            (input)="formatPhone($event)" />
                        <mat-error *ngIf="hasError('phone')">
                            {{ getErrorMessage('phone') }}
                        </mat-error>
                    </mat-form-field>

                    <!-- Monthly Income -->
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-label>Ingreso Mensual S/ *</mat-label>
                        <input matInput type="number" formControlName="monthlyIncome" placeholder="S/ 0.00" min="0"
                            step="0.01" />
                        <mat-error *ngIf="hasError('monthlyIncome')">
                            {{ getErrorMessage('monthlyIncome') }}
                        </mat-error>
                    </mat-form-field>

                    <!-- Occupation -->
                    <mat-form-field appearance="outline" class="full-width span-2">
                        <mat-label>Ocupación</mat-label>
                        <input matInput formControlName="occupation" placeholder="Ej. Ingeniero, Contador, etc." />
                    </mat-form-field>

                    <!-- Notes -->
                    <mat-form-field appearance="outline" class="full-width span-2">
                        <mat-label>Notas Adicionales</mat-label>
                        <textarea matInput formControlName="notes" rows="3"
                            placeholder="Información adicional sobre el cliente..."></textarea>
                    </mat-form-field>
                </div>

                <!-- Information Alert -->
                <div class="info-alert">
                    <mat-icon class="info-icon">info</mat-icon>
                    <div class="info-content">
                        <h4>Información Importante</h4>
                        <ul>
                            <li>Los campos marcados con * son obligatorios</li>
                            <li>El DNI debe ser único en el sistema</li>
                            <li>El ingreso mensual se utilizará para calcular la capacidad crediticia</li>
                            <li>Puede usar "Guardar y Nuevo" para registrar múltiples clientes</li>
                        </ul>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button mat-button type="button" (click)="cancel()" [disabled]="isSubmitting">
                        <mat-icon>close</mat-icon>
                        Cancelar
                    </button>

                    <button mat-stroked-button color="primary" type="button" (click)="saveAndNew()"
                        [disabled]="form.invalid || isSubmitting">
                        <mat-icon>add</mat-icon>
                        Guardar y Nuevo
                    </button>

                    <button mat-raised-button color="primary" type="button" (click)="submit()"
                        [disabled]="form.invalid || isSubmitting">
                        <mat-icon>save</mat-icon>
                        Guardar Cliente
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>